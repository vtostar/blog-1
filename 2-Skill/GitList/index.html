<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Git 命令梳理 · Woonden Bar</title><meta name="description" content="Git 命令梳理 - Aiden Zhao"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/blog/favicon.png"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Woonden Bar"></head><body><div class="wrap"><header><a href="/blog/" class="logo-link"><img src="/blog/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/blog/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/blog/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Git 命令梳理</h1><div class="post-info">Jan 18, 2017</div><div class="post-content"><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git config --global user.name &quot;[user_name]&quot;</div><div class="line">git config --global user.email &quot;[user_email]&quot;</div><div class="line"># 如果留有以前的配置文件，直接将其放入 user 目录下，即可不需再次配置</div></pre></td></tr></table></figure>
<h2 id="新建"><a href="#新建" class="headerlink" title="新建"></a>新建</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">git init</div><div class="line"># 在当前目录创建 Git 仓库</div><div class="line"></div><div class="line">git init [floder_name]</div><div class="line"># 新建一个目录，并将其初始化为 Git 仓库</div><div class="line"></div><div class="line">git init --bare</div><div class="line"># 创建一个 Git 裸仓库​​</div></pre></td></tr></table></figure>
<h2 id="增删文件"><a href="#增删文件" class="headerlink" title="增删文件"></a>增删文件</h2><h3 id="添加文件"><a href="#添加文件" class="headerlink" title="添加文件"></a>添加文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">git add [dir]/[file]</div><div class="line"># 添加指定文件或指定文件夹到暂存区</div><div class="line"></div><div class="line">git add *.[file_type]</div><div class="line"># 添加某个类型的所有文件到暂存区</div><div class="line"></div><div class="line">git add .</div><div class="line"># 添加当前目录所有文件到暂存区​</div><div class="line"></div><div class="line">git add -p</div><div class="line"># 将文件添加到暂存区时，要求逐次手动确认</div></pre></td></tr></table></figure>
<h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git rm [file]</div><div class="line"># 删除工作区的文件，并将此操作放入暂存区。等同于在文件资源管理器中手动删除</div><div class="line"></div><div class="line">git rm --cached [file]</div><div class="line"># 停止追踪指定文件，但该文件会保留在工作区</div></pre></td></tr></table></figure>
<h2 id="提交"><a href="#提交" class="headerlink" title="提交"></a>提交</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git commit -m &quot;[description]&quot;</div><div class="line"># 提交暂存区的所有文件到仓库</div><div class="line"></div><div class="line">git commit -m &quot;[description]&quot; [file1] [file2]</div><div class="line"># 提交暂存区的指定文件到仓库</div></pre></td></tr></table></figure>
<h2 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">git status</div><div class="line"># 显示变更过的文件</div><div class="line"></div><div class="line">git log ( -[num] )</div><div class="line"># 显示当前分支的版本历史，默认显示三次。可以在后面跟 -[num] 参数自定义显示次数</div><div class="line"></div><div class="line">git log --pretty=oneline ( -[num] )</div><div class="line"># 使提交信息一条仅占一行。如果不加 -[num] 参数，则默认显示过去 30 次提交信息</div><div class="line"></div><div class="line">git log --graph</div><div class="line"># 查看分支合并图</div><div class="line"></div><div class="line">git reflog</div><div class="line"># 查看 HEAD 的每一次变化历史</div><div class="line"></div><div class="line">git diff</div><div class="line"># 显示所有文件的暂存区和工作区的差异</div><div class="line"></div><div class="line">git diff -- [file]</div><div class="line"># 显示某个文件的暂存区和工作区的差异</div><div class="line"></div><div class="line">git diff HEAD</div><div class="line"># 显示所有文件的工作区与当前分支最新 commit 之间的差异</div><div class="line"></div><div class="line">git diff HEAD -- [file]</div><div class="line"># 显示某个文件的工作区与当前分支最新 commit 之间的差异</div></pre></td></tr></table></figure>
<h2 id="撤销"><a href="#撤销" class="headerlink" title="撤销"></a>撤销</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">git checkout [file]</div><div class="line"># 让某个文件回到最近一次 git commit 或 git add 时的状态</div><div class="line"></div><div class="line">git checkout [commit] [file]</div><div class="line"># 恢复某个 commit 的指定文件到暂存区和工作区</div><div class="line"></div><div class="line">git checkout .</div><div class="line"># 恢复目前暂存区的所有文件到工作区</div><div class="line"></div><div class="line">git reset --hard</div><div class="line"># 重置暂存区与工作区，与上一次 commit 保持一致​</div><div class="line"></div><div class="line">git reset --hard HEAD^</div><div class="line"># 将文件版本快速回退至上一个版本。在 Git 中，HEAD 表示当前版本，上一个版本是 HEAD^，上上一个版本是 HEAD^^。也可以用数字表示，比如上 100 个版本是 HEAD~100</div><div class="line"></div><div class="line">git reset [commit]</div><div class="line"># 重置当前分支的 HEAD 为指定 commit，同时重置暂存区，但工作区不变</div><div class="line"></div><div class="line">git reset --hard [commit]</div><div class="line"># 重置当前分支的 HEAD 为 指定commit，同时重置暂存区和工作区，与指定 commit 一致</div><div class="line"></div><div class="line">git stash</div><div class="line"># 将未提交的变化暂时移除​</div><div class="line"></div><div class="line">git stash pop</div><div class="line"># 将未提交的变化再次移入</div></pre></td></tr></table></figure>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">git branch</div><div class="line"># 列出所有本地分支</div><div class="line"></div><div class="line">git branch -r</div><div class="line"># 列出所有远程分支</div><div class="line"></div><div class="line">git branch -a</div><div class="line"># 列出所有本地分支和远程分支</div><div class="line"></div><div class="line">git branch [branch]</div><div class="line"># 新建一个分支，但依然停留在当前分支</div><div class="line"></div><div class="line">git checkout -b [branch]</div><div class="line"># 新建一个分支，并切换到该分支</div><div class="line"></div><div class="line">git checkout -b [branch] origin/[branch]</div><div class="line"># 在本地新建一个分支，并使其与远程分支保持同步</div><div class="line"></div><div class="line">git checkout --orphan [branch]</div><div class="line"># 新建一个空白分支​。常用于创建 gh-pages 分支</div><div class="line"></div><div class="line">git merge [branch]</div><div class="line"># 使用快速合并，合并指定分支到当前分支</div><div class="line"></div><div class="line">git merge --no-ff [branch]</div><div class="line"># 使用正常合并，合并指定分支到当前分支​</div><div class="line"></div><div class="line">git rebase [branch]</div><div class="line"># 在一个分支里提交的改变移到另一个分支里重放一遍</div><div class="line"></div><div class="line">git push origin -d [branch]</div><div class="line">git branch -dr [remote/branch]</div><div class="line"># 删除远程分支</div><div class="line"></div><div class="line">git branch [branch] [commit]</div><div class="line"># 新建一个分支，指向指定 commit</div></pre></td></tr></table></figure>
<h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">git tag</div><div class="line"># 列出所有标签</div><div class="line"></div><div class="line">git tag [tag]</div><div class="line"># 在当前 commit 新建一个标签</div><div class="line"></div><div class="line">git tag [tag] [commit]</div><div class="line"># 在指定 commit 新建一个标签</div><div class="line"></div><div class="line">git show [tag]</div><div class="line"># 查看标签信息</div><div class="line"></div><div class="line">git push origin [tag]</div><div class="line"># 提交指定标签</div><div class="line"></div><div class="line">git push origin --tags</div><div class="line"># 提交所有标签</div><div class="line"></div><div class="line">git tag -d [tag]</div><div class="line"># 删除本地标签</div><div class="line"></div><div class="line">git push origin :refs/tags/[tag]</div><div class="line"># 删除远程标签。要想删除远程标签，必须先删除本地标签</div><div class="line"></div><div class="line">git checkout -b [branch] [tag]</div><div class="line"># 新建一个分支，指向某个标签</div></pre></td></tr></table></figure>
<h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><h3 id="SSH-Key"><a href="#SSH-Key" class="headerlink" title="SSH Key"></a>SSH Key</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C &quot;[user_email]&quot;</div><div class="line"># 创建 SSH 密钥</div><div class="line"></div><div class="line">ssh -T git@github.com</div><div class="line"># 测试是否顺利连接到 Github</div><div class="line"></div><div class="line">ssh -T git@git.coding.net</div><div class="line"># 测试是否顺利连接到 Coding.net</div></pre></td></tr></table></figure>
<h3 id="克隆"><a href="#克隆" class="headerlink" title="克隆"></a>克隆</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git clone [URL] ( --depth [num] )</div><div class="line"># 如果添加 --depth [num] 参数可以指定克隆深度。比如 --depth 1 表示仅克隆最近的一次 commit</div></pre></td></tr></table></figure>
<h3 id="拉取"><a href="#拉取" class="headerlink" title="拉取"></a>拉取</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">git remote -v</div><div class="line"># 显示所有远程仓库</div><div class="line"></div><div class="line">git pull ( [remote] [remote_branch]:[local_branch] )</div><div class="line"># 拉取远程仓库相应追踪分支的更改并直接合并到本地当前分支。如果当前分支只有一个追踪分支，连远程主机名都可以省略</div><div class="line"></div><div class="line">git pull origin [branch]</div><div class="line"># 取回远程仓库的变化，并直接与本地分支合并</div><div class="line"></div><div class="line">git fetch ( [remote] )</div><div class="line"># 下载远程仓库的所有变动</div><div class="line"></div><div class="line">git fetch -p</div><div class="line"># 获取远程仓库对远程分支的删除操作</div><div class="line"></div><div class="line">git remote show [remote]</div><div class="line"># 显示某个远程仓库的信息</div></pre></td></tr></table></figure>
<h3 id="推送"><a href="#推送" class="headerlink" title="推送"></a>推送</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">git push ( [remote] [local_branch]:[remote_branch] )</div><div class="line"># 推送本地当前分支的修改到远程仓库相应追踪分支。如果当前分支只有一个追踪分支，连远程主机名都可以省略</div><div class="line"># 如果该远程分支不存在，则会被新建</div><div class="line"># 注意，分支推送顺序的写法是 &lt;来源地&gt;:&lt;目的地&gt;，所以 git pull 是 &lt;远程分支&gt;:&lt;本地分支&gt;，而 git push 是 &lt;本地分支&gt;:&lt;远程分支&gt;</div><div class="line"></div><div class="line">git push -u origin master</div><div class="line"># 把当前 master 分支首次推送到远程</div><div class="line"></div><div class="line">git push origin [branch]</div><div class="line"># 上传本地指定分支到远程仓库</div><div class="line"></div><div class="line">git push origin -a</div><div class="line"># 推送所有分支到远程仓库</div></pre></td></tr></table></figure>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">git remote add origin [URL]</div><div class="line"># 添加远程仓库</div><div class="line"></div><div class="line">git remote set-url origin [URL]</div><div class="line"># 修改远程仓库</div><div class="line"></div><div class="line">git remote add [name] [URL]</div><div class="line"># 添加一个名为 [name] 的新远程仓库</div><div class="line"></div><div class="line">git remote set-url --add origin [URL]</div><div class="line"># 添加一个远程仓库，并使其名字为 origin</div><div class="line"># 使用此方法可以实现一键推送至多个远程仓库</div><div class="line"># 但拉取时仅能拉取 .git/config 中列出的第一个原始仓库的更改</div></pre></td></tr></table></figure>
<h2 id="子模块"><a href="#子模块" class="headerlink" title="子模块"></a>子模块</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">git submodule add [URL]</div><div class="line"># 添加子模块</div><div class="line"></div><div class="line">git submodule init</div><div class="line"># 初始化你的本地配置文件</div><div class="line"></div><div class="line">git submodule update</div><div class="line"># 更新子模块</div></pre></td></tr></table></figure>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="配置命令别名"><a href="#配置命令别名" class="headerlink" title="配置命令别名"></a>配置命令别名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git config --global alias.[st] status</div><div class="line"># 配置命令别名。比如用 st 代替 status</div><div class="line"># --global 参数是全局参数，也就是这些命令在这台电脑的所有 Git 仓库下都有用</div><div class="line"># 此修改将保存至 .gitconfig 文件中，也可以直接进入 .gitconfig 文件批量修改</div></pre></td></tr></table></figure>
<h3 id="一些参数简写意义"><a href="#一些参数简写意义" class="headerlink" title="一些参数简写意义"></a>一些参数简写意义</h3><p>来自 <a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="external">阮一峰：常用 Git 命令清单</a> 一文中 AnnabellChan 的评论：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git checkout -b，b 其实是 browse 的 abbr</div><div class="line">git branch -r, r -&gt; remote</div><div class="line">git branch -a, a -&gt; all</div><div class="line">git config -l, l -&gt; list</div><div class="line">git commit -m, m -&gt; message</div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/blog/2-Skill/SSGuide/" class="prev">PREV</a><a href="/blog/2-Skill/PrivateGitRepository/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://yoursite.com">Aiden Zhao</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>