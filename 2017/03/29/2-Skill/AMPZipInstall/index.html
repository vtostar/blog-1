<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Apache + MySQL + PHP 压缩版安装 · Hexo</title><meta name="description" content="Apache + MySQL + PHP 压缩版安装 - John Doe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/blog/favicon.png"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Hexo"></head><body><div class="wrap"><header><a href="/blog/" class="logo-link"><img src="/blog/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/blog/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/blog/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Apache + MySQL + PHP 压缩版安装</h1><div class="post-info">Mar 29, 2017</div><div class="post-content"><h2 id="Notice-here"><a href="#Notice-here" class="headerlink" title="Notice here"></a>Notice here</h2><ul>
<li>本人使用的操作系统为 Windows 10；</li>
<li>在下的软件安装路径在 d: 下 amp 文件夹，并分别新建了名为 apache, mysql, php 的文件夹来存放解压后的文件。下文中凡是出现路径的地方，还请自行替换为您的安装目录；</li>
<li>囿于洒家的能力，本文仅介绍了最基础的安装操作。您在操作过程中出现的各种问题，小子不负任何责任，还望诸位担待则个。</li>
</ul>
<h2 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h2><p>新建一个名为 <code>amp</code> 的文件夹，并新建三个子文件夹，名为 <code>apache</code>, <code>mysql</code>, <code>php</code></p>
<p>获取 apache、mysql 和 php 的 zip 格式压缩包，并分别解压相关文件至 amp 各个文件夹中</p>
<ul>
<li>apache: <a href="http://www.apachehaus.com/cgi-bin/download.plx" target="_blank" rel="external">http://www.apachehaus.com/cgi-bin/download.plx</a></li>
<li>mysql: <a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="external">https://dev.mysql.com/downloads/mysql/</a></li>
<li>php: <a href="http://php.net/downloads.php" target="_blank" rel="external">http://php.net/downloads.php</a></li>
</ul>
<p>添加环境变量</p>
<ul>
<li>apache: D:\amp\apache\bin</li>
<li>mysql: D:\amp\mysql\bin</li>
<li>php: D:\amp\php</li>
</ul>
<h2 id="安装-Apache"><a href="#安装-Apache" class="headerlink" title="安装 Apache"></a>安装 Apache</h2><p>使用文本编辑器打开 <code>/conf/httpd.conf</code>，编辑默认目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Define SRVROOT &quot;d:/amp/apache&quot;</div></pre></td></tr></table></figure>
<p>使用管理员权限的 cmd 执行以下命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">httpd -k install</div></pre></td></tr></table></figure>
<p>如果执行以上命令无反应，有可能需要将名为 <code>vcruntime140.dll</code> 的文件拖入 <code>C:/Windows/System32</code> 文件夹下</p>
<h2 id="安装-MySQL"><a href="#安装-MySQL" class="headerlink" title="安装 MySQL"></a>安装 MySQL</h2><p>使用管理员权限的 cmd 执行以下命令以初始化 data 目录。使用该命令，root 用户的默认密码为空</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqld --initialize-insecure --user=mysql</div></pre></td></tr></table></figure>
<p>继续执行以下命令以安装 mysql</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqld --install</div></pre></td></tr></table></figure>
<h2 id="配置-MySQL"><a href="#配置-MySQL" class="headerlink" title="配置 MySQL"></a>配置 MySQL</h2><p>如果使用 5.7.17 及其以下版本，可以复制一份 mysql 根目录的 <code>my_default.ini</code> 并重命名为 <code>my.ini</code></p>
<p>如果使用 5.7.18 及其以上版本，需要手动在 mysql 根目录新建一个 my.ini 文件，在管理员权限的 cmd 中执行以下命令以设置 mysql 的配置文件路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqld --default-files=&quot;d:/amp/mysql/my.ini&quot;</div></pre></td></tr></table></figure>
<p>5.7.18 以上版本 (可能) 需要安装运行库：<code>Microsoft Visual C++ 2013 Redistributable Package (MSVCR120.dll)</code>。下载地址为</p>
<blockquote>
<p><a href="https://www.microsoft.com/en-hk/download/details.aspx?id=40784" target="_blank" rel="external">https://www.microsoft.com/en-hk/download/details.aspx?id=40784</a></p>
</blockquote>
<p>设置字符编码 (需要保持 [mysqld] 一项在最下方)。设置完毕后需要重启 cmd 并重新登录方可查看编码的更新。查看整体编码命令：<code>SHOW VARIABLES LIKE &#39;character%&#39;;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[client]</div><div class="line">default-character-set=utf8</div><div class="line">[mysql]</div><div class="line">default-character-set=utf8</div><div class="line">[mysqld]</div><div class="line">character-set-server=utf8</div></pre></td></tr></table></figure>
<p>修改 mysql 的 root 用户密码。登陆 mysql，运行以下指令。<code>(&#39;&#39;)</code> 之间的是新密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SET PASSWORD FOR &apos;root&apos;@&apos;localhost&apos;=PASSWORD(&apos;&apos;);</div></pre></td></tr></table></figure>
<h2 id="Apache-加载-PHP"><a href="#Apache-加载-PHP" class="headerlink" title="Apache 加载 PHP"></a>Apache 加载 PHP</h2><p>创建 php 的配置文件。在 php 目录下找到 php.ini-development，复制一份并重命名为 php.ini</p>
<blockquote>
<p>注意：由于空格的不兼容性，以下命令不保证复制粘贴后可以正常使用。可以使用 <code>httpd -t</code> 命令进行语法检查</p>
</blockquote>
<p>加载 php 模块。打开 apache 的配置文件 httpd.conf，在模块部分根据自己的 php 版本插入以下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">LoadModule php5_module &quot;d:/amp/php/php5apache2_4.dll&quot;</div><div class="line">LoadModule php7_module &quot;d:/amp/php/php7apache2_4.dll&quot;</div></pre></td></tr></table></figure>
<p>为 php 模块分配任务。在上面的命令下发插入以上命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">AddType application/x-httpd-php .php .html</div></pre></td></tr></table></figure>
<p>引入 php 的配置文件。在 httpd.conf 中搜索并插入 php.ini 的路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PHPIniDir &quot;d:/amp/php/&quot;</div></pre></td></tr></table></figure>
<p>修改 php 默认时区。在 php 的配置文件 php.ini 中搜索并修改 <code>date.timezone</code> 为 <code>PRC</code>。注意，需要去掉语句前的注释符号 (分号)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date.timezone = PRC</div></pre></td></tr></table></figure>
<h2 id="Apache-加载-vhosts-配置文件"><a href="#Apache-加载-vhosts-配置文件" class="headerlink" title="Apache 加载 vhosts 配置文件"></a>Apache 加载 vhosts 配置文件</h2><p>打开 http.conf 文件，搜索并取消注释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Include conf/extra/httpd-vhosts.conf</div></pre></td></tr></table></figure>
<h2 id="php-链接-mysql"><a href="#php-链接-mysql" class="headerlink" title="php 链接 mysql"></a>php 链接 mysql</h2><p>将 php 配置成 mysql 的客户端。在 php.ini 中搜索并设置 <code>extension=php_mysql.dll</code>，取消其注释</p>
<p>告知 php 在哪个目录下能找到 php 的扩展文件。在 php.ini 中搜索并设置 php 扩展的绝对路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">extension_dir = &quot;d:/amp/php/ext&quot;</div></pre></td></tr></table></figure>
<h2 id="安装-phpMyAdmin"><a href="#安装-phpMyAdmin" class="headerlink" title="安装 phpMyAdmin"></a>安装 phpMyAdmin</h2><ul>
<li>解压文件至 <code>/apache/htdosc</code> 目录 (或将其解压至其他虚拟目录)</li>
<li>更改文件名为 <code>phpmyadmin</code></li>
<li>复制 <code>libraries/config.default</code> 文件至 <code>phpmyadmin</code> 主目录，并更名为 <code>config.inc</code></li>
<li>搜索并取消 php.ini 中的 <code>extension=php_mbstring.dll4.23</code></li>
<li>设置 config.inc 和 config.sample.inc 中的 <code>$cfg[&#39;blowfish_secret&#39;]</code> 为 32 位以上的字符</li>
<li>访问 <code>localhost/phpmyadmin/index.php</code></li>
</ul>
<h2 id="安装-Xdebug"><a href="#安装-Xdebug" class="headerlink" title="安装 Xdebug"></a>安装 Xdebug</h2><ul>
<li>下载：<a href="https://xdebug.org/download.php" target="_blank" rel="external">https://xdebug.org/download.php</a></li>
<li>将文件复制到 <code>amp/php/ext</code> 目录下，并改名为 <code>php_xdebug.dll</code> (非必需)</li>
<li>在 php.ini 中添加以下内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[Xdebug]</div><div class="line">zend_extension=&quot;D:/amp/php/ext/php_xdebug.dll&quot;</div><div class="line">xdebug.auto_trace=1</div><div class="line">xdebug.collect_params=1</div><div class="line">xdebug.collect_return=1</div><div class="line">xdebug.trace_output_dir=&quot;D:/amp/_xdebug/trace&quot;</div><div class="line">xdebug.profiler_enable=1</div><div class="line">xdebug.profiler_output_dir=&quot;D:/amp/_xdebug/profiler&quot;</div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/blog/2017/04/10/2-Skill/VSCodeGuide/" class="prev">PREV</a><a href="/blog/2017/03/11/1-Life/TravelOfBeijing/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://yoursite.com">John Doe</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>