<!DOCTYPE html>
<html lang="en>">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

    
    
    <meta name="google-site-verification"
          content="c66gcm0iMw487a2YC6w7cFbrhhe_Mh_vVNC6Pt3Dak8">
    

    
    
    <meta name="theme-color" content="#f9f9f9">
    

    
    

    
    <title>
        
        Apache + MySQL + PHP 压缩版安装
        &nbsp;|&nbsp;
        
        Woonden Bar
    </title>

    
    
    <link type="image/x-icon" rel="shortcut icon"
          href="/blog/favicon.png">
    

    
     <link rel="stylesheet" href="/blog/css/style.css">

</head>


<body>

<div class="body-wrapper">
    <header>
    <div class="container">

        
        <div>
            <h1 class="logo">
                <a href="/blog/">
                    Woonden Bar
                </a>
            </h1>
        </div>

        
        <nav class="navbar">
            <ul class="navbar-menus">
                
                <li class="navbar-menus-item">
                    <a href="/blog/">
                        
                        Home
                    </a>
                </li>
                
                <li class="navbar-menus-item">
                    <a href="/blog/categories">
                        
                        Categories
                    </a>
                </li>
                
                <li class="navbar-menus-item">
                    <a href="/blog/tags">
                        
                        Tags
                    </a>
                </li>
                
                <li class="navbar-menus-item">
                    <a href="/blog/about">
                        
                        About
                    </a>
                </li>
                
            </ul>
        </nav>

    </div>
</header>


    <div class="main">
    <div class="container">

        <article class="post-body">

    <div class="title">
        <h1 class="title-inner">
            Apache + MySQL + PHP 压缩版安装
        </h1>

        <div class="title-meta">
            <span class="title-meta-time">
                2017-03-29
            </span>
        </div>
    </div>

    <div class="content">

        
        

        <h2 id="Notice-here"><a href="#Notice-here" class="headerlink" title="Notice here"></a>Notice here</h2><ul>
<li>本人使用的操作系统为 Windows 10；</li>
<li>在下的软件安装路径在 d: 下 amp 文件夹，并分别新建了名为 apache, mysql, php 的文件夹来存放解压后的文件。下文中凡是出现路径的地方，还请自行替换为您的安装目录；</li>
<li>囿于洒家的能力，本文仅介绍了最基础的安装操作。您在操作过程中出现的各种问题，小子不负任何责任，还望诸位担待则个。</li>
</ul>
<h2 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h2><p>新建一个名为 <code>amp</code> 的文件夹，并新建三个子文件夹，名为 <code>apache</code>, <code>mysql</code>, <code>php</code></p>
<p>获取 apache、mysql 和 php 的 zip 格式压缩包，并分别解压相关文件至 amp 各个文件夹中</p>
<ul>
<li>apache: <a href="http://www.apachehaus.com/cgi-bin/download.plx" target="_blank" rel="external">http://www.apachehaus.com/cgi-bin/download.plx</a></li>
<li>mysql: <a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="external">https://dev.mysql.com/downloads/mysql/</a></li>
<li>php: <a href="http://php.net/downloads.php" target="_blank" rel="external">http://php.net/downloads.php</a></li>
</ul>
<p>添加环境变量</p>
<ul>
<li>apache: D:\amp\apache\bin</li>
<li>mysql: D:\amp\mysql\bin</li>
<li>php: D:\amp\php</li>
</ul>
<h2 id="安装-Apache"><a href="#安装-Apache" class="headerlink" title="安装 Apache"></a>安装 Apache</h2><p>使用文本编辑器打开 <code>/conf/httpd.conf</code>，编辑默认目录</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="attribute">Define</span> SRVROOT <span class="string">"d:/amp/apache"</span></span>
</pre></td></tr></table></figure>
<p>使用管理员权限的 cmd 执行以下命令</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">httpd -k <span class="keyword">install</span></span>
</pre></td></tr></table></figure>
<p>如果执行以上命令无反应，有可能需要将名为 <code>vcruntime140.dll</code> 的文件拖入 <code>C:/Windows/System32</code> 文件夹下</p>
<h2 id="安装-MySQL"><a href="#安装-MySQL" class="headerlink" title="安装 MySQL"></a>安装 MySQL</h2><p>使用管理员权限的 cmd 执行以下命令以初始化 data 目录。使用该命令，root 用户的默认密码为空</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="comment">mysqld</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">initialize</span><span class="literal">-</span><span class="comment">insecure</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">user=mysql</span></span>
</pre></td></tr></table></figure>
<p>继续执行以下命令以安装 mysql</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">mysqld <span class="comment">--install</span></span>
</pre></td></tr></table></figure>
<h2 id="配置-MySQL"><a href="#配置-MySQL" class="headerlink" title="配置 MySQL"></a>配置 MySQL</h2><p>如果使用 5.7.17 及其以下版本，可以复制一份 mysql 根目录的 <code>my_default.ini</code> 并重命名为 <code>my.ini</code></p>
<p>如果使用 5.7.18 及其以上版本，需要手动在 mysql 根目录新建一个 my.ini 文件，在管理员权限的 cmd 中执行以下命令以设置 mysql 的配置文件路径</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">mysqld --<span class="keyword">default</span>-files=<span class="string">"d:/amp/mysql/my.ini"</span></span>
</pre></td></tr></table></figure>
<p>5.7.18 以上版本 (可能) 需要安装运行库：<code>Microsoft Visual C++ 2013 Redistributable Package (MSVCR120.dll)</code>。下载地址为</p>
<blockquote>
<p><a href="https://www.microsoft.com/en-hk/download/details.aspx?id=40784" target="_blank" rel="external">https://www.microsoft.com/en-hk/download/details.aspx?id=40784</a></p>
</blockquote>
<p>设置字符编码 (需要保持 [mysqld] 一项在最下方)。设置完毕后需要重启 cmd 并重新登录方可查看编码的更新。查看整体编码命令：<code>SHOW VARIABLES LIKE &#39;character%&#39;;</code></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
</pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span>
<span class="line"><span class="attr">default-character-set</span>=utf8</span>
<span class="line"><span class="section">[mysql]</span></span>
<span class="line"><span class="attr">default-character-set</span>=utf8</span>
<span class="line"><span class="section">[mysqld]</span></span>
<span class="line"><span class="attr">character-set-server</span>=utf8</span>
</pre></td></tr></table></figure>
<p>修改 mysql 的 root 用户密码。登陆 mysql，运行以下指令。<code>(&#39;&#39;)</code> 之间的是新密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> <span class="string">'root'</span>@<span class="string">'localhost'</span>=<span class="keyword">PASSWORD</span>(<span class="string">''</span>);</span>
</pre></td></tr></table></figure>
<h2 id="Apache-加载-PHP"><a href="#Apache-加载-PHP" class="headerlink" title="Apache 加载 PHP"></a>Apache 加载 PHP</h2><p>创建 php 的配置文件。在 php 目录下找到 php.ini-development，复制一份并重命名为 php.ini</p>
<blockquote>
<p>注意：由于空格的不兼容性，以下命令不保证复制粘贴后可以正常使用。可以使用 <code>httpd -t</code> 命令进行语法检查</p>
</blockquote>
<p>加载 php 模块。打开 apache 的配置文件 httpd.conf，在模块部分根据自己的 php 版本插入以下内容</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line"><span class="attribute"><span class="nomarkup">LoadModule</span></span> php5_module <span class="string">"d:/amp/php/php5apache2_4.dll"</span></span>
<span class="line"><span class="attribute"><span class="nomarkup">LoadModule</span></span> php7_module <span class="string">"d:/amp/php/php7apache2_4.dll"</span></span>
</pre></td></tr></table></figure>
<p>为 php 模块分配任务。在上面的命令下发插入以上命令</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">AddType application/x-httpd-php <span class="string">.php</span> <span class="string">.html</span></span>
</pre></td></tr></table></figure>
<p>引入 php 的配置文件。在 httpd.conf 中搜索并插入 php.ini 的路径</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="attribute">PHPIniDir</span> <span class="string">"d:/amp/php/"</span></span>
</pre></td></tr></table></figure>
<p>修改 php 默认时区。在 php 的配置文件 php.ini 中搜索并修改 <code>date.timezone</code> 为 <code>PRC</code>。注意，需要去掉语句前的注释符号 (分号)</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">date<span class="selector-class">.timezone</span> = PRC</span>
</pre></td></tr></table></figure>
<h2 id="Apache-加载-vhosts-配置文件"><a href="#Apache-加载-vhosts-配置文件" class="headerlink" title="Apache 加载 vhosts 配置文件"></a>Apache 加载 vhosts 配置文件</h2><p>打开 http.conf 文件，搜索并取消注释</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">Include</span> <span class="keyword">conf</span>/extra/httpd-vhosts.<span class="keyword">conf</span></span>
</pre></td></tr></table></figure>
<h2 id="php-链接-mysql"><a href="#php-链接-mysql" class="headerlink" title="php 链接 mysql"></a>php 链接 mysql</h2><p>将 php 配置成 mysql 的客户端。在 php.ini 中搜索并设置 <code>extension=php_mysql.dll</code>，取消其注释</p>
<p>告知 php 在哪个目录下能找到 php 的扩展文件。在 php.ini 中搜索并设置 php 扩展的绝对路径</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="attr">extension_dir</span> = <span class="string">"d:/amp/php/ext"</span></span>
</pre></td></tr></table></figure>
<h2 id="安装-phpMyAdmin"><a href="#安装-phpMyAdmin" class="headerlink" title="安装 phpMyAdmin"></a>安装 phpMyAdmin</h2><ul>
<li>解压文件至 <code>/apache/htdosc</code> 目录 (或将其解压至其他虚拟目录)</li>
<li>更改文件名为 <code>phpmyadmin</code></li>
<li>复制 <code>libraries/config.default</code> 文件至 <code>phpmyadmin</code> 主目录，并更名为 <code>config.inc</code></li>
<li>搜索并取消 php.ini 中的 <code>extension=php_mbstring.dll4.23</code></li>
<li>设置 config.inc 和 config.sample.inc 中的 <code>$cfg[&#39;blowfish_secret&#39;]</code> 为 32 位以上的字符</li>
<li>访问 <code>localhost/phpmyadmin/index.php</code></li>
</ul>
<h2 id="安装-Xdebug"><a href="#安装-Xdebug" class="headerlink" title="安装 Xdebug"></a>安装 Xdebug</h2><ul>
<li>下载：<a href="https://xdebug.org/download.php" target="_blank" rel="external">https://xdebug.org/download.php</a></li>
<li>将文件复制到 <code>amp/php/ext</code> 目录下，并改名为 <code>php_xdebug.dll</code> (非必需)</li>
<li>在 php.ini 中添加以下内容</li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
</pre></td><td class="code"><pre><span class="line">[Xdebug]</span>
<span class="line"><span class="attribute">zend_extension</span>=<span class="string">"D:/amp/php/ext/php_xdebug.dll"</span></span>
<span class="line">xdebug.<span class="attribute">auto_trace</span>=1</span>
<span class="line">xdebug.<span class="attribute">collect_params</span>=1</span>
<span class="line">xdebug.<span class="attribute">collect_return</span>=1</span>
<span class="line">xdebug.<span class="attribute">trace_output_dir</span>=<span class="string">"D:/amp/_xdebug/trace"</span></span>
<span class="line">xdebug.<span class="attribute">profiler_enable</span>=1</span>
<span class="line">xdebug.<span class="attribute">profiler_output_dir</span>=<span class="string">"D:/amp/_xdebug/profiler"</span></span>
</pre></td></tr></table></figure>

    </div>

    
    

    
    

</article>

<div class="prev-next">
    <div class="wrapper">

        
        
        <div class="prev">
            <a href="/blog/Skill/VSCodeGuide/">
                < Newer
            </a>
        </div>
        

        
        
        <div class="next">
            <a href="/blog/Life/TravelOfBeijing/">
                Older >
            </a>
        </div>
        

    </div>
</div>



    </div>
</div>

</div>

<footer>
    <div class="container text-center">

        
        <p class="copyright">
            <span>&copy; 2015 - 2017</span>
            <span> / </span>
            <span><a href="http://varzy.me" target="_blank">Aiden Zhao</a></span>
        </p>

    </div>
</footer>


</body>

</html>
